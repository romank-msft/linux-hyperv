# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/bus/microsoft,vmbus.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Microsoft Hyper-V VMBus

maintainers:
  - Saurabh Sengar <ssengar@linux.microsoft.com>

description:
  VMBus is a software bus that implement the protocols for communication
  between the root or host OS and guest OSs (virtual machines).

properties:
  compatible:
    const: microsoft,vmbus

  ranges: true

  '#address-cells':
    const: 2

  '#size-cells':
    const: 1

required:
  - compatible
  - ranges
  - '#address-cells'
  - '#size-cells'

additionalProperties: false

examples:
  - |
    soc {
        #address-cells = <2>;
        #size-cells = <1>;
        bus {
            compatible = "simple-bus";
            #address-cells = <2>;
            #size-cells = <1>;
            ranges;

            gic: intc@fe200000 {
              compatible = "arm,gic-v3";
              reg = <0x0 0xfe200000 0x0 0x10000>,   /* GIC Dist */
                    <0x0 0xfe280000 0x0 0x200000>;  /* GICR */
              interrupt-controller;
              #interrupt-cells = <3>;
            }

            vmbus@ff0000000 {
                compatible = "microsoft,vmbus";
                #address-cells = <2>;
                #size-cells = <1>;
                ranges = <0x0f 0xf0000000 0x0f 0xf0000000 0x10000000>;
                dma-coherent;
                interrupt-parent = <&gic>;
                interrupts = <1 2 1>;
            };
        };
    };
